config globals 'globals'
	option mmx_mask '0x3F00'

config interface 'wan'
	option enabled '1'
	option initial_state 'online'
	option family 'ipv4'
	list track_ip '1.1.1.1'
	option track_method 'ping'
	option reliability '1'
	option count '1'
	option size '56'
	option max_ttl '60'
	option timeout '4'
	option interval '10'
	option failure_interval '5'
	option recovery_interval '5'
	option down '5'
	option up '5'

config interface 'wwan'
	option enabled '1'
	option initial_state 'online'
	option family 'ipv4'
	# list track_ip '1.1.1.1'
	option track_method 'ping'
	option reliability '1'
	option count '1'
	option size '56'
	option max_ttl '60'
	option timeout '4'
	option interval '10'
	option failure_interval '5'
	option recovery_interval '5'
	option down '5'
	option up '5'

config interface 'openvpn'
	option enabled '1'
	option initial_state 'online'
	option family 'ipv4'
	# list track_ip '1.1.1.1'
	option track_method 'ping'
	option reliability '1'
	option count '1'
	option size '56'
	option max_ttl '60'
	option timeout '4'
	option interval '10'
	option failure_interval '5'
	option recovery_interval '5'
	option down '5'
	option up '5'

config member 'wan_m6_w6'
	option interface 'wan'
	option metric '6'
	option weight '6'

config member 'wwan_m6_w6'
	option interface 'wwan'
	option metric '6'
	option weight '6'

config member 'wan_m5_w6'
	option interface 'wan'
	option metric '5'
	option weight '6'

config member 'wwan_m5_w6'
	option interface 'wwan'
	option metric '5'
	option weight '6'

config member 'openvpn_m4_w6'
	option interface 'openvpn'
	option metric '4'
	option weight '6'

config policy 'balanced'
	list use_member 'wan_m6_w6'
	list use_member 'wwan_m6_w6'
	list use_member 'openvpn_m4_w6'
	option last_resort 'unreachable'

config policy 'wan_only'
	list use_member 'wan_m5_w6'
	list use_member 'openvpn_m4_w6'
	option last_resort 'unreachable'

config policy 'wwan_only'
	list use_member 'wwan_m5_w6'
	list use_member 'openvpn_m4_w6'
	option last_resort 'unreachable'

config policy 'wan_to_wwan'
	list use_member 'wan_m6_w6'
	list use_member 'wwan_m5_w6'
	list use_member 'openvpn_m4_w6'
	option last_resort 'unreachable'

config policy 'wwan_to_wan'
	list use_member 'wwan_m6_w6'
	list use_member 'wan_m5_w6'
	list use_member 'openvpn_m4_w6'
	option last_resort 'unreachable'

config rule 'https'
	option dest_port '443'
	option use_policy 'balanced'
	option proto 'tcp'
	option sticky '1'

config rule 'default_rule_v4'
	option dest_ip '0.0.0.0/0'
	option use_policy 'balanced'
	option family 'ipv4'
	option proto 'all'
	option sticky '0'

config rule 'default_rule_v6'
	option dest_ip '::/0'
	option use_policy 'balanced'
	option family 'ipv6'
	option proto 'all'
	option sticky '0'
